<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Scroll Reset Repro (Turbo 8.0.14)</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-refresh-scroll" content="reset">
    <script type="module" src="https://cdn.jsdelivr.net/npm/@hotwired/turbo@8.0.14/dist/turbo.es2017-esm.js"></script>
    <style>
      body { font-family: sans-serif; line-height: 1.6; margin: 0; padding-top: 120px; }
      nav { position: fixed; top: 0; left: 0; right: 0; background: white; padding: 16px; border-bottom: 2px solid #ccc; z-index: 1000; }
      .spacer { height: 2000px; background: linear-gradient(#fafafa, #eee); margin: 16px 0; }
      a { margin-right: 12px; }
      h1 { margin: 16px; }
      p { margin: 16px; }
    </style>
  </head>
  <body>
    <div style="background: #ef4444; color: white; padding: 8px 16px; margin-bottom: 16px; font-weight: bold;">
      ❌ BROKEN VERSION (Turbo 8.0.14) - Scroll reset fails on error responses
    </div>
    <h1>#1449 Repro: turbo-refresh-scroll reset vs HTTP status</h1>
    <p style="background: #f0f0f0; padding: 12px 16px; margin: 16px; border-left: 4px solid #ef4444;">
      <strong>Compare:</strong> <strong>Before (Broken - you are here)</strong> | <a href="/scroll_fixed" data-turbo="false">After (Fixed) →</a>
    </p>
    <p>Scroll down, then click a link. The next page should scroll to the top.</p>
    <nav>
      <strong>Test links:</strong>
      <a id="to200" href="/scroll/ok">200 OK</a>
      <a id="to302" href="/scroll/302">302 → 200</a>
      <a id="to404" href="/scroll/404">404</a>
      <a id="to500" href="/scroll/500">500</a>
      <a id="to302to404" href="/scroll/302to404">302 → 404</a>
      <a id="to302to500" href="/scroll/302to500">302 → 500</a>
    </nav>
    <div class="spacer"></div>
    <p>Bottom area</p>
  </body>
</html>
